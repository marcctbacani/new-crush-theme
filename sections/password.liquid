<script
  type="application/json"
  data-section-type="password"
  data-section-id="{{ section.id }}"
></script>

<h2>{{ 'password.general.opening_soon' | t }}</h2>

{% if shop.password_message != blank %}
  <p>{{ shop.password_message }}</p>
{% endif %}

<div class="password-subscribe-wrapper visible">
  {% form 'customer', class: 'password-subscribe-form' %}
    {{ form.errors | default_errors }}

    {% if form.posted_successfully? %}
      <p class="form-success">{{ 'password.general.subscribe_form_success' | t }}</p>
    {% else %}
      {% if section.settings.newsletter_text != blank %}
        {{ section.settings.newsletter_text }}
      {% endif %}

      <input class="password-input" type="text" name="contact[email]" id="email" placeholder="{{ 'general.general.email_placeholder' | t }}">
      <input class="submit password-button" name="commit" type="submit" value="{{ 'password.general.subscribe' | t }}">
      <input type="hidden" name="contact[tags]" value="prospect, password page">
    {% endif %}
  {% endform %}
</div>

<div class="password-form-wrapper">
  {% form 'storefront_password' %}
    {{ form.errors | default_errors }}
    <div class="{% if form.errors %}has-errors{% endif %}" data-password-form-inner>
      <input class="password-input" type="password" name="password" id="password" placeholder="{{ 'password.general.use_password' | t }}" autofocus>
      <input class="submit password-button" name="submit" type="submit" value="{{ 'password.general.submit' | t }}">
    </div>
  {% endform %}
</div>

<a class="password-entry" href="#" data-enter-password="{{ 'password.general.use_password' | t }}" data-cancel="{{ 'password.general.cancel' | t }}">{{ 'password.general.use_password' | t }}</a>

{% schema %}
{
  "name": "Password pages",
  "class": "section-password",
  "settings": [
    {
      "type": "richtext",
      "id": "newsletter_text",
      "label": "Newsletter text"
    }
  ]
}

{% endschema %}